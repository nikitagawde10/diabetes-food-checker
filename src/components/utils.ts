import { FoodAdvice } from "../types";

export const GIF_POOL: Record<
  FoodAdvice["diabetesSafetyTag"],
  { src: string; alt: string }[]
> = {
  good_choice: [
    {
      //jungkook
      src: "https://media1.tenor.com/m/APGTmejkDIEAAAAC/finger-heart-bts.gif",
      alt: "Jungkook approves",
    },
    {
      //jungkook
      src: "https://i.pinimg.com/originals/12/e4/ef/12e4ef95f14883e45d85608a89449ec4.gif",
      alt: "Jungkook happy",
    },
    {
      //jungkook
      src: "https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExbXRoM2l0cHl3bTRlaThjd2V5OWRyejN4aGx5anlqZWdoOGV6ZzRkeiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/gKGLm7ksfrqtKRQ0Sy/giphy.gif",
      alt: "Approved",
    },
    {
      //V
      src: "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExMzdjeGpmYnduZDJvbXlwM3d6aXVrNmhlNm02MTNpYnh2OGo1OG5xcSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/mBMz7yoMxWjOO3aN91/giphy.gif",
      alt: "Happy yes",
    },
    {
      //V
      src: "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExcnAzb3pjZ3dnN3I4cmt4c2UydGxrdWNqZXFjcXo0MG5sbDU2djluYiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/UL6KmK8dqmWs/giphy.gif",
      alt: "Confident yes",
    },
    {
      //BTS
      src: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3NDl0ZzlrbWR3dm5nZGpkdDVmdzFrOGFoazN6amNnaGdhYWd5cmc2NiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/Bp6AQC3GbW6LldXXhp/giphy.gif",
      alt: "Good vibes",
    },
    {
      //V
      src: "https://media1.tenor.com/m/zGuEglLrivAAAAAd/bts-bangtan-boys.gif",
      alt: "V approves",
    },
    {
      //jungkook
      src: "https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExM2ZsMnAzanQycHB2NG9oYXc3cTVpa3V1a2V6OWNzNHNtdXB0d3d2cSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/0QqZfsK8q4KxUvNMxZ/giphy.gif",
      alt: "Excited yes",
    },
    {
      //V
      src: "https://media1.tenor.com/m/FyzVdOQYW3oAAAAd/tae-taehyung.gif",
      alt: "Taehyung happy",
    },
    {
      //V
      src: "https://media1.tenor.com/m/GEF2by0Hmw4AAAAd/taehyung-taehyung-layover.gif",
      alt: "V happy",
    },
    {
      //Taekook
      src: "https://media1.tenor.com/m/myZEifI7Et8AAAAC/dynataees-taekook.gif",
      alt: "Taekook happy",
    },
    {
      //V
      src: "https://media1.tenor.com/m/cpxI6ngyuOUAAAAd/taehyung-eat.gif",
      alt: "V eating happily",
    },
  ],

  okay_in_moderation: [
    {
      //jikook
      src: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3aDk5ZzVsbHJudGJnM3g1ZDFqanJxcGt4MmQ2NWoyeXNwd2pjbGFiaiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/ibYI5m2EyLgEnanuid/giphy.gif",
      alt: "Thinking",
    },
    {
      //junkook
      src: "https://media1.tenor.com/m/Lu-UIDEWJ8QAAAAd/bts-bangtan-boys.gif",
      alt: "Jungkook cautious",
    },
    {
      //uday
      src: "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExcHR4YnB3azhsdng1eHBseTlqZno3OXNxM3pldHZ2dGFkYjh0ZjY1ZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/XBpEgheIVWnC8hwc46/giphy.gif",
      alt: "Control",
    },
    {
      //jikook
      src: "https://media1.tenor.com/m/h7O7Zc8nWP8AAAAC/park-jimin-jimin.gif",
      alt: "Jikook IDK",
    },
    {
      //jimin
      src: "https://media1.tenor.com/m/iUel27Gop98AAAAd/jimin-bts-jimin-shocked.gif",
      alt: "Jimin unsure",
    },
    {
      //v
      src: "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExMGk1dTNiZDJsYzFzeHNyMDVzY3ZrM3JycDZjeDRzZmh5MmgxZHpoNiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/UurFWROK7ZMvKLNvio/giphy.gif",
      alt: "Think first",
    },
    {
      //V
      src: "https://media1.tenor.com/m/of7_B5Ta4LgAAAAC/taehyung-bts.gif",
      alt: "V thinking",
    },
    {
      //jungkook
      src: "https://media1.tenor.com/m/wvGwMMfdw3wAAAAd/jinmojv21-jungkook.gif",
      alt: "Careful Jungkook",
    },
    {
      //jimin
      src: "https://media1.tenor.com/m/4AxJGXjH1LUAAAAd/jiminastie-jiminsalfa.gif",
      alt: "Jimin confused",
    },
    {
      //jimin
      src: "https://media1.tenor.com/m/OqqpYndBEbIAAAAd/bts-jin.gif",
      alt: "Jin unsure",
    },
    {
      //jungkook
      src: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZzNwYWhwNmQwZmpnYnNhaGR3ZWtwZXFvaWh2dnNkbm0zM3NvaHZ5MiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/VVMRhYo7wwJkIPwwJF/giphy.gif",
      alt: "Hmm",
    },
  ],

  not_recommended: [
    {
      //jungkook
      src: "https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExNG80MmJhZ2w5Y212aWp1N3VvczRrZnh6eXZuZ3Uwc3FueDRlOTZzaCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/0qfkcpaLuTYgJTS0kY/giphy.gif",
      alt: "Nope",
    },
    {
      //v
      src: "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExNDE4c2hqY29qdWg2YnR5eWlxcXg1bWQzY2NhdWhkeGpzZGIyNGt3MyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/uUlVoSU6PX6rJ5DkIO/giphy.gif",
      alt: "Hard no",
    },
    {
      //jimin
      src: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3bmdyZDR2ZWt6YnA4cGVqOHpsZXA2NmI3ZWt4YzgzbjR0ZWIzNm5kdyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/bacYwzpwaCuO3bmsBG/giphy.gif",
      alt: "Big no",
    },
    {
      //jimin
      src: "https://media1.tenor.com/m/30He1QHVvaAAAAAd/jinmojv21-bts.gif",
      alt: "Jimin says no",
    },
    {
      //jungkook
      src: "https://media1.tenor.com/m/SdZ6vRFo8IUAAAAd/jungkook-jungkook-no.gif",
      alt: "Jungkook no",
    },
    {
      //jimin
      src: "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYzg0aXQwd2Jwc3g0NHB1NXJvOGxrN2RxejZodzZ5YzhlaXl3Zm1rdCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/d2sTZOZQNVAOIXs3Vv/giphy.gif",
      alt: "Absolutely not",
    },
    {
      //V
      src: "https://media1.tenor.com/m/Xb_qGF5cPpAAAAAd/taehyung-pout-bts-pout.gif",
      alt: "V disapproves",
    },
    {
      //jungkook
      src: "https://media1.tenor.com/m/90vjEn3wd3oAAAAd/bts-jungkook.gif",
      alt: "Jungkook disapproves",
    },
    {
      //V
      src: "https://media1.tenor.com/m/1mnhB_bltb0AAAAd/taehyungtaehyung-taehyung.gif",
      alt: "V says no",
    },
    {
      //jimin
      src: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3b2gxMmh4dzZ2bXJtcGhlY3l4NXplcnRwMWVteDQxdnZqdDZkZzEyciZlcD12MV9naWZzX3NlYXJjaCZjdD1n/WNXT4fxjlLv2Ez9gUn/giphy.gif",
      alt: "Jimin disapproves",
    },
  ],

  unknown: [
    {
      //jhope
      src: "https://media.giphy.com/media/ZTFgbsUU0NRYI/giphy.gif",
      alt: "Confused",
    },
    {
      //jungkook
      src: "https://media1.tenor.com/m/JjJNF4CTerEAAAAd/jeonvntold.gif",
      alt: "Jungkook confused",
    },
    {
      //V
      src: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3dmF2bXB5MXRocTZlbGRzNHNhaTlyZDB6OHI2cGkyMmt6ZWttcTh4dSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/PmpenkvG0JmiQ/giphy.gif",
      alt: "V confused",
    },
  ],
};

// Stores last random index used for each tag
export const lastGifIndex: Record<string, number | null> = {
  good_choice: null,
  okay_in_moderation: null,
  not_recommended: null,
  unknown: null,
};

export function getNextGif(tag: FoodAdvice["diabetesSafetyTag"]) {
  const pool = GIF_POOL[tag] ?? GIF_POOL.unknown;
  if (pool.length === 0) {
    return GIF_POOL.unknown[0];
  }

  const lastIndex = lastGifIndex[tag] ?? -1;
  let newIndex = Math.floor(Math.random() * pool.length);

  // Avoid immediate repetition if possible
  if (pool.length > 1 && newIndex === lastIndex) {
    newIndex = (newIndex + 1) % pool.length;
  }

  lastGifIndex[tag] = newIndex;
  return pool[newIndex];
}
